<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>لیدربرد دکّان - هفتگی</title>

  <link
    href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"
    rel="stylesheet"
  />
  <link
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    rel="stylesheet"
  />

  <style>
    @import url("https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700&display=swap");

    * {
      font-family: "Vazirmatn", sans-serif;
      box-sizing: border-box;
    }

    body {
      margin: 0;
      min-height: 100vh;
      overflow-x: hidden;
      background: radial-gradient(circle at 0% 0%, #f093fb 0, transparent 55%),
        radial-gradient(circle at 100% 100%, #667eea 0, transparent 55%),
        linear-gradient(135deg, #764ba2 0%, #2b5876 100%);
      background-size: 200% 200%;
      animation: bgMove 22s ease-in-out infinite;
    }

    .wave-overlay {
      position: fixed;
      inset: 0;
      pointer-events: none;
      opacity: 0.28;
      mix-blend-mode: screen;
      background-image:
        radial-gradient(circle at 10% 20%, rgba(255,255,255,0.25) 0, transparent 55%),
        radial-gradient(circle at 90% 70%, rgba(255,255,255,0.2) 0, transparent 55%);
      animation: waveDrift 20s ease-in-out infinite alternate;
    }

    @keyframes bgMove {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    @keyframes waveDrift {
      0% { transform: translate3d(0,0,0); }
      50% { transform: translate3d(-20px, 10px, 0); }
      100% { transform: translate3d(20px,-20px,0); }
    }

    .leaderboard-card {
      background: rgba(255, 255, 255, 0.98);
      border-radius: 24px;
      box-shadow: 0 24px 80px rgba(15, 23, 42, 0.45);
      overflow: hidden;
      backdrop-filter: blur(24px);
      animation: cardFloat 10s ease-in-out infinite alternate;
    }

    @keyframes cardFloat {
      0%   { transform: translateY(0); }
      50%  { transform: translateY(-6px); }
      100% { transform: translateY(0); }
    }

    .header-gradient {
      background: radial-gradient(circle at 0 0, rgba(255,255,255,0.15) 0, transparent 55%),
        linear-gradient(135deg, #f093fb 0%, #f5576c 40%, #ff8a00 100%);
      padding: 2.25rem 2rem;
      text-align: center;
      position: relative;
      overflow: hidden;
    }

    .header-gradient::before {
      content: "";
      position: absolute;
      width: 320px;
      height: 320px;
      border-radius: 999px;
      background: radial-gradient(circle, rgba(255,255,255,0.4) 0, transparent 60%);
      top: -180px;
      left: -120px;
      opacity: 0.4;
      animation: headerGlow 12s ease-in-out infinite alternate;
    }

    @keyframes headerGlow {
      0%   { transform: translate3d(0,0,0) scale(1); opacity: 0.35; }
      50%  { transform: translate3d(20px,20px,0) scale(1.12); opacity: 0.6; }
      100% { transform: translate3d(-10px,10px,0) scale(1); opacity: 0.4; }
    }

    .trophy-icon {
      font-size: 3.2rem;
      margin-bottom: 1rem;
      color: #ffd700;
      text-shadow: 0 0 18px rgba(255, 215, 0, 0.9);
      animation: floatTrophy 3s ease-in-out infinite;
    }

    @keyframes floatTrophy {
      0% { transform: translateY(0); }
      50% { transform: translateY(-8px) scale(1.03); }
      100% { transform: translateY(0); }
    }

    .rank-badge {
      width: 50px;
      height: 50px;
      min-width: 50px;
      min-height: 50px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 1.2rem;
    }

    .rank-1 {
      background: linear-gradient(135deg, #ffd700, #ffa500);
      color: white;
      box-shadow: 0 4px 15px rgba(255, 215, 0, 0.55);
      animation: glowPulse 2.4s ease-in-out infinite;
    }

    .rank-2 {
      background: linear-gradient(135deg, #c0c0c0, #808080);
      color: white;
      box-shadow: 0 4px 15px rgba(192, 192, 192, 0.4);
      animation: glowPulse 2.6s ease-in-out infinite;
    }

    .rank-3 {
      background: linear-gradient(135deg, #cd7f32, #8b4513);
      color: white;
      box-shadow: 0 4px 15px rgba(205, 127, 50, 0.4);
      animation: glowPulse 2.8s ease-in-out infinite;
    }

    .rank-other {
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
    }

    @keyframes glowPulse {
      0% {
        box-shadow: 0 4px 15px rgba(255, 215, 0, 0.4);
        transform: scale(1);
      }
      50% {
        box-shadow: 0 0 24px rgba(255, 255, 255, 0.8);
        transform: scale(1.07);
      }
      100% {
        box-shadow: 0 4px 15px rgba(255, 215, 0, 0.4);
        transform: scale(1);
      }
    }

    .leaderboard-row {
      display: flex;
      align-items: center;
      padding: 1.1rem 1.4rem;
      border-bottom: 1px solid #edf2f7;
      transition: all 0.3s ease;
      flex-wrap: wrap;
      position: relative;
      overflow: hidden;
    }

    .leaderboard-row::before {
      content: "";
      position: absolute;
      inset-inline-end: -40%;
      inset-block-end: -100%;
      width: 40%;
      height: 200%;
      background: radial-gradient(
        circle at 0 50%,
        rgba(102, 126, 234, 0.06) 0,
        transparent 65%
      );
      opacity: 0;
      transform: translateX(10px);
      transition: all 0.3s ease;
    }

    .leaderboard-row:hover {
      background: #f8f9ff;
      transform: translateX(-4px);
    }

    .leaderboard-row:hover::before {
      opacity: 1;
      transform: translateX(0);
    }

    .brand-name {
      flex: 1;
      font-size: 1.1rem;
      font-weight: 600;
      color: #2d3748;
      margin: 0 1rem;
      word-break: break-word;
    }

    .stats-wrapper {
      display: flex;
      align-items: center;
    }

    .stat-box {
      background: #f7fafc;
      padding: 0.55rem 1.1rem;
      border-radius: 10px;
      margin: 0 0.35rem;
      text-align: center;
      min-width: 110px;
      border: 1px solid rgba(148, 163, 184, 0.2);
    }

    .stat-label {
      font-size: 0.75rem;
      color: #718096;
      margin-bottom: 0.15rem;
    }

    .stat-value {
      font-size: 1.05rem;
      font-weight: bold;
      color: #1a202c;
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(22px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .animate-row {
      animation: fadeInUp 0.6s ease forwards;
      opacity: 0;
    }

    .week-tabs {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-bottom: 1.25rem;
      justify-content: center;
    }

    .week-tab {
      padding: 0.45rem 0.95rem;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.5);
      background: rgba(248, 250, 252, 0.8);
      color: #334155;
      font-size: 0.9rem;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
      transition: all 0.25s ease;
      backdrop-filter: blur(10px);
    }

    .week-tab span {
      font-weight: 500;
    }

    .week-tab.active {
      background: linear-gradient(135deg, #6366f1, #ec4899);
      color: #f9fafb;
      border-color: transparent;
      box-shadow: 0 10px 25px rgba(129, 140, 248, 0.4);
      transform: translateY(-1px);
    }

    .week-tab:hover:not(.active) {
      background: rgba(241, 245, 249, 0.9);
      transform: translateY(-1px);
      box-shadow: 0 6px 16px rgba(15, 23, 42, 0.15);
    }

    .leaderboard-panel {
      position: relative;
    }

    .leaderboard-inner {
      opacity: 0;
      transform: translateX(10px);
      pointer-events: none;
      transition: all 0.3s ease;
    }

    .leaderboard-inner.active {
      opacity: 1;
      transform: translateX(0);
      pointer-events: auto;
    }

    .leaderboard-inner.exit-left {
      opacity: 0;
      transform: translateX(-10px);
    }

    .leaderboard-inner.exit-right {
      opacity: 0;
      transform: translateX(10px);
    }

    /* Splash screen */
    #splash-screen {
      position: fixed;
      inset: 0;
      background: radial-gradient(circle at 0% 0%, #f97316 0, transparent 55%),
        radial-gradient(circle at 100% 100%, #6366f1 0, transparent 55%),
        #0f172a;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 40;
      color: #f9fafb;
      overflow: hidden;
    }

    .splash-logo {
      font-size: 3.5rem;
      margin-bottom: 1rem;
      animation: floatTrophy 3s ease-in-out infinite;
      color: #fde68a;
      text-shadow: 0 0 25px rgba(253, 224, 71, 0.9);
    }

    .saffron-img {
      width: 110px;
      height: auto;
      display: block;
      filter: drop-shadow(0 0 22px rgba(255, 200, 120, 0.8));
    }

    .splash-title {
      font-size: 2rem;
      font-weight: 800;
      letter-spacing: 0.08em;
      margin-bottom: 0.5rem;
    }

    .splash-sub {
      color: #e5e7eb;
      margin-bottom: 1.75rem;
    }

    .splash-bar-container {
      width: 210px;
      height: 6px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.6);
      overflow: hidden;
      position: relative;
    }

    .splash-bar-fill {
      position: absolute;
      inset: 0;
      width: 0%;
      background: linear-gradient(90deg, #fbbf24, #f97316, #ec4899);
      border-radius: inherit;
      animation: splashProgress 2s ease-in-out forwards;
    }

    @keyframes splashProgress {
      0%   { width: 0%; }
      30%  { width: 40%; }
      60%  { width: 70%; }
      100% { width: 100%; }
    }

    .splash-fade-out {
      animation: splashFadeOut 0.6s ease forwards;
    }

    @keyframes splashFadeOut {
      to {
        opacity: 0;
        transform: scale(1.03);
        pointer-events: none;
      }
    }

    @media (max-width: 640px) {
      .leaderboard-row {
        padding: 0.9rem 1rem;
      }

      .brand-name {
        width: 100%;
        margin: 0.6rem 0 0.25rem;
        font-size: 1rem;
      }

      .stats-wrapper {
        width: 100%;
        margin-top: 0.4rem;
        display: flex;
        flex-direction: column;
      }

      .stat-box {
        width: 100%;
        margin: 0.2rem 0;
        padding: 0.55rem 0.9rem;
      }

      .stat-value {
        font-size: 0.98rem;
      }

      .rank-badge {
        width: 44px;
        height: 44px;
        min-width: 44px;
        min-height: 44px;
        font-size: 1rem;
      }
    }
  </style>
</head>
<body>
  <!-- Splash Screen -->
  <div id="splash-screen">
    <div class="splash-logo">
      <i class="fas fa-trophy"></i>
    </div>
    <div class="splash-title">لیدربرد دکّان</div>
    <div class="splash-sub">در حال آماده‌سازی رتبه‌بندی برندهای زعفران...</div>
    <div class="splash-bar-container">
      <div class="splash-bar-fill"></div>
    </div>
  </div>

  <!-- Wavy overlay -->
  <div class="wave-overlay"></div>

  <div class="container mx-auto px-4 py-10">
    <div class="leaderboard-card max-w-4xl mx-auto">
      <div class="header-gradient">
        <i class="fas fa-trophy trophy-icon"></i>
        <h1 class="text-4xl md:text-5xl font-bold text-white mb-2 tracking-wide">
          لیدربرد دکّان
        </h1>
        <p class="text-white text-opacity-90 text-sm md:text-base">
          رتبه‌بندی هفتگی برندهای زعفران بر اساس فروش و سهم بازار
        </p>
      </div>

      <div class="p-6">
        <!-- Week Tabs -->
        <div class="week-tabs" id="week-tabs"></div>

        <!-- Leaderboard Panel -->
        <div class="leaderboard-panel" id="leaderboard-panel"></div>
      </div>

      <div class="bg-gray-50 p-4 text-center text-gray-600 text-xs md:text-sm">
        <i class="fas fa-sync-alt"></i>
        آخرین به‌روزرسانی: ۱۴۰۴/۹/۱۵
      </div>
    </div>
  </div>

  <script>
    // ==== WEEKLY DATA ====
const weeklyLeaderboards = [
  // Week 1
  {
    id: "week1",
    label: "هفته ۱",
    dateRange: "۱۴۰۴/۸/۲۱ تا ۱۴۰۴/۸/۲۷",
    data: [
      { rank: 1,  brand: "سفیرا",      sales: 45.4, share: 20.95 },
      { rank: 2,  brand: "زرون",       sales: 34.2, share: 15.78 },
      { rank: 3,  brand: "زرآسا",      sales: 21.2, share: 9.78 },
      { rank: 4,  brand: "گل پری",     sales: 14.6, share: 6.74 },
      { rank: 5,  brand: "اعیانی",     sales: 10.0, share: 4.61 },
      { rank: 6,  brand: "azaferan",   sales: 8.6, share: 3.97 },
      { rank: 7,  brand: "میترا",      sales: 8.0, share: 3.69 },
      { rank: 8,  brand: "عطر خورشید", sales: 8.0, share: 3.69 },
      { rank: 9,  brand: "زرسازان",    sales: 6.6, share: 3.05 },
      { rank: 10, brand: "خاتون",      sales: 6.6, share: 3.05 },
      { rank: 11, brand: "ساتیرا",     sales: 6.0, share: 2.77 },
      { rank: 12, brand: "زعفرو",      sales: 6.0, share: 2.77 },
      { rank: 13, brand: "سفرون",      sales: 5.5, share: 2.54 },
      { rank: 14, brand: "زرافران",    sales: 4.0, share: 1.85 },
      { rank: 15, brand: "سرو زر",     sales: 4.0, share: 1.85 },
      { rank: 16, brand: "هور",        sales: 2.0, share: 0.92 },
      { rank: 17, brand: "تیسور",      sales: 2.0, share: 0.92 },
      { rank: 18, brand: "زرنوا",      sales: 2.0, share: 0.92 },
      { rank: 19, brand: "زرنگار",     sales: 2.0, share: 0.92 },
      { rank: 20, brand: "zero",       sales: 2.0, share: 0.92 },
      { rank: 21, brand: "سفوران",     sales: 2.0, share: 0.92 },
      { rank: 22, brand: "زفرا",       sales: 2.0, share: 0.92 },
      { rank: 23, brand: "پری زاد",    sales: 2.0, share: 0.92 },
      { rank: 24, brand: "زریران",     sales: 2.0, share: 0.92 },
      { rank: 25, brand: "آرمیتی",     sales: 2.0, share: 0.92 },
      { rank: 26, brand: "ساروند",     sales: 2.0, share: 0.92 },
      { rank: 27, brand: "زرپر",       sales: 2.0, share: 0.92 },
      { rank: 28, brand: "اصالت",      sales: 2.0, share: 0.92 },
      { rank: 29, brand: "زرمه",       sales: 2.0, share: 0.92 },
      { rank: 30, brand: "زرکس",       sales: 0.0, share: 0.00 },
      { rank: 31, brand: "زروا",       sales: 0.0, share: 0.00 },
      { rank: 32, brand: "کام بیز",    sales: 0.0, share: 0.00 },
      { rank: 33, brand: "کوهی خیل",   sales: 0.0, share: 0.00 },
      { rank: 34, brand: "زرتاب",      sales: 0.0, share: 0.00 },
      { rank: 35, brand: "مثقال",      sales: 0.0, share: 0.00 },
      { rank: 36, brand: "سرخزاد",     sales: 0.0,  share: 0.00 }

      
    ]
  },
  // Week 2
 {
  id: "week2",
  label: "هفته ۲-۳",
  dateRange: "۱۴۰۴/۸/۲۸ تا ۱۴۰۴/۹/۴",
data: [
    { rank: 1,  brand: "پری زاد",      sales: 197.0, share: 13.02 },
    { rank: 2,  brand: "زرآسا",        sales: 188.4, share: 12.45 },
    { rank: 3,  brand: "گل پری",       sales: 154.8, share: 10.23 },
    { rank: 4,  brand: "زرون",         sales: 119.6, share: 7.90 },
    { rank: 5,  brand: "زرافران",      sales: 84.2,  share: 5.57 },
    { rank: 6,  brand: "سفرون",        sales: 76.6,  share: 5.06 },
    { rank: 7,  brand: "زعفرو",        sales: 73.6,  share: 4.86 },
    { rank: 8,  brand: "زرنگار",       sales: 71.0,  share: 4.69 },
    { rank: 9,  brand: "سرو زر",       sales: 64.4,  share: 4.26 },
    { rank: 10, brand: "سفیرا",        sales: 59.8,  share: 3.95 },
    { rank: 11, brand: "زرکس",         sales: 59.6,  share: 3.94 },
    { rank: 12, brand: "azaferan",     sales: 55.2,  share: 3.65 },
    { rank: 13, brand: "آرمیتی",       sales: 36.8,  share: 2.43 },
    { rank: 14, brand: "سفوران",       sales: 32.2,  share: 2.13 },
    { rank: 15, brand: "زرنوا",        sales: 27.6,  share: 1.82 },
    { rank: 16, brand: "میترا",        sales: 25.9,  share: 1.71 },
    { rank: 17, brand: "زرسازان",      sales: 23.0,  share: 1.52 },
    { rank: 18, brand: "تیسور",        sales: 23.0,  share: 1.52 },
    { rank: 19, brand: "خاتون",        sales: 20.4,  share: 1.35 },
    { rank: 20, brand: "ساروند",       sales: 17.2,  share: 1.14 },
    { rank: 21, brand: "اذر خوشه",     sales: 16.8,  share: 1.11 },
    { rank: 22, brand: "اعیانی",       sales: 16.7,  share: 1.10 },
    { rank: 23, brand: "زریران",       sales: 13.8,  share: 0.91 },
    { rank: 24, brand: "هور",          sales: 13.2,  share: 0.87 },
    { rank: 25, brand: "زرمه",         sales: 12.6,  share: 0.83 },
    { rank: 26, brand: "ساتیرا",       sales: 11.2,  share: 0.74 },
    { rank: 27, brand: "عطر خورشید",   sales: 9.2,   share: 0.61 },
    { rank: 28, brand: "زفرا",         sales: 4.6,   share: 0.30 },
    { rank: 29, brand: "سرخزاد",       sales: 4.6,   share: 0.30 },
    { rank: 30, brand: "zero",         sales: 0.0,   share: 0.00 },
    { rank: 31, brand: "زرپر",         sales: 0.0,   share: 0.00 },
    { rank: 32, brand: "اصالت",        sales: 0.0,   share: 0.00 },
    { rank: 33, brand: "زروا",         sales: 0.0,   share: 0.00 },
    { rank: 34, brand: "کام بیز",      sales: 0.0,   share: 0.00 },
    { rank: 35, brand: "کوهی خیل",     sales: 0.0,   share: 0.00 },
    { rank: 36, brand: "زرتاب",        sales: 0.0,   share: 0.00 },
    { rank: 37, brand: "مثقال",        sales: 0.0,   share: 0.00 }
  ]
},
  {
  id: "week4",
  label: "هفته ۴",
  dateRange: "۱۴۰۴/۹/۱۲ تا ۱۴۰۴/۹/۱۸",
  data: [
    { rank: 1,  brand: "زرکس",       sales: 36.8, share: 42.54 },
    { rank: 2,  brand: "زعفرو",      sales: 11.6, share: 13.41 },
    { rank: 3,  brand: "زرنگار",     sales: 9.2,  share: 10.64 },
    { rank: 4,  brand: "سرو زر",     sales: 9.2,  share: 10.64 },
    { rank: 5,  brand: "زرمه",       sales: 9.2,  share: 10.64 },
    { rank: 6,  brand: "گل پری",     sales: 4.6,  share: 5.32 },
    { rank: 7,  brand: "اعیانی",     sales: 4.3,  share: 4.97 },
    { rank: 8,  brand: "سفرون",      sales: 1.6,  share: 1.85 },
    { rank: 9,  brand: "پری زاد",    sales: 0.0,  share: 0.00 },
    { rank: 10, brand: "زرآسا",      sales: 0.0,  share: 0.00 },
    { rank: 11, brand: "زرون",       sales: 0.0,  share: 0.00 },
    { rank: 12, brand: "زرافران",    sales: 0.0,  share: 0.00 },
    { rank: 13, brand: "سفیرا",      sales: 0.0,  share: 0.00 },
    { rank: 14, brand: "azaferan",   sales: 0.0,  share: 0.00 },
    { rank: 15, brand: "آرمیتی",     sales: 0.0,  share: 0.00 },
    { rank: 16, brand: "سفوران",     sales: 0.0,  share: 0.00 },
    { rank: 17, brand: "زرنوا",      sales: 0.0,  share: 0.00 },
    { rank: 18, brand: "میترا",      sales: 0.0,  share: 0.00 },
    { rank: 19, brand: "زرسازان",    sales: 0.0,  share: 0.00 },
    { rank: 20, brand: "تیسور",      sales: 0.0,  share: 0.00 },
    { rank: 21, brand: "خاتون",      sales: 0.0,  share: 0.00 },
    { rank: 22, brand: "ساروند",     sales: 0.0,  share: 0.00 },
    { rank: 23, brand: "اذر خوشه",   sales: 0.0,  share: 0.00 },
    { rank: 24, brand: "زریران",     sales: 0.0,  share: 0.00 },
    { rank: 25, brand: "هور",        sales: 0.0,  share: 0.00 },
    { rank: 26, brand: "ساتیرا",     sales: 0.0,  share: 0.00 },
    { rank: 27, brand: "عطر خورشید", sales: 0.0,  share: 0.00 },
    { rank: 28, brand: "زفرا",       sales: 0.0,  share: 0.00 },
    { rank: 29, brand: "سرخزاد",     sales: 0.0,  share: 0.00 },
    { rank: 30, brand: "zero",       sales: 0.0,  share: 0.00 },
    { rank: 31, brand: "زرپر",       sales: 0.0,  share: 0.00 },
    { rank: 32, brand: "اصالت",      sales: 0.0,  share: 0.00 },
    { rank: 33, brand: "زروا",       sales: 0.0,  share: 0.00 }
  ]
}
];

const weekTabsEl = document.getElementById("week-tabs");
const panelEl = document.getElementById("leaderboard-panel");

// Make WEEK 2 the default main page:
let activeWeekId = "week4";

function buildTabs() {
  weekTabsEl.innerHTML = weeklyLeaderboards
    .map((w) => {
      const isActive = w.id === activeWeekId;
      return `
        <button
          class="week-tab ${isActive ? "active" : ""}"
          data-week-id="${w.id}"
        >
          <i class="fas fa-calendar-week text-xs"></i>
          <span>${w.label}</span>
        </button>`;
    })
    .join("");
}

function createRow(item, index) {
  const rankClass =
    item.rank === 1
      ? "rank-1"
      : item.rank === 2
      ? "rank-2"
      : item.rank === 3
      ? "rank-3"
      : "rank-other";

  const iconHtml =
    item.rank === 1
      ? '<i class="fas fa-crown"></i>'
      : item.rank;

  const delay = (index + 1) * 0.04;

  return `
    <div class="leaderboard-row animate-row" style="animation-delay: ${delay}s">
      <div class="rank-badge ${rankClass}">${iconHtml}</div>
      <div class="brand-name">${item.brand}</div>
      <div class="stats-wrapper">
        <div class="stat-box">
          <div class="stat-label">مقدار فروش</div>
          <div class="stat-value">${item.sales} گرم</div>
        </div>
        <div class="stat-box">
          <div class="stat-label">سهم در بازار</div>
          <div class="stat-value">٪${item.share.toFixed(2)}</div>
        </div>
      </div>
    </div>`;
}

function buildPanels() {
  const activeWeek = weeklyLeaderboards.find(w => w.id === activeWeekId);
  if (!activeWeek) {
    panelEl.innerHTML = "";
    return;
  }

  const rowsHtml = activeWeek.data
    .map((item, i) => createRow(item, i))
    .join("");

  panelEl.innerHTML = `
    <div class="leaderboard-inner active" data-week-panel="${activeWeek.id}">
      <div class="text-xs text-gray-500 mb-2 text-center md:text-right">
        <i class="far fa-clock ml-1"></i>
        بازه زمانی: ${activeWeek.dateRange}
      </div>
      <div>${rowsHtml}</div>
    </div>`;
}

function onTabsClick(e) {
  const btn = e.target.closest(".week-tab");
  if (!btn) return;

  const targetId = btn.getAttribute("data-week-id");
  if (!targetId || targetId === activeWeekId) return;

  activeWeekId = targetId;

  document
    .querySelectorAll(".week-tab")
    .forEach((t) => t.classList.remove("active"));
  btn.classList.add("active");

  buildPanels();
}

window.addEventListener("load", () => {
  buildTabs();
  buildPanels();

  const splash = document.getElementById("splash-screen");
  setTimeout(() => {
    splash.classList.add("splash-fade-out");
    setTimeout(() => {
      splash.style.display = "none";
    }, 700);
  }, 2300);
});

weekTabsEl.addEventListener("click", onTabsClick);
  </script>
</body>
</html>
